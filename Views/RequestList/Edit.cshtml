@model FinanceRequest.Models.RequestModel

@{
    ViewBag.Title = "Edit request";
}

    <div class="container">
        <h1>@ViewBag.Title</h1>
        <div class="row">
            <div class="col-md-12">
                <div class="container well">
                    <h3>@ViewBag.Message</h3>
                    <p>Amend the relevant fields in the form below to update your ad.</p>
                    @using (Html.BeginForm("Edit", "Requests", null, FormMethod.Post, new { enctype = "multipart/form-data", @class = "form-horizontal" }))
                    {
                        @Html.AntiForgeryToken()

                        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                        @Html.HiddenFor(model => model.Id)

                        <div class="form-group col-md-10">
                            @Html.LabelFor(model => model.Title, htmlAttributes: new { @class = "control-label " })
                            @Html.EditorFor(model => model.Title, new { htmlAttributes = new { @class = "form-control" } })
                            @Html.ValidationMessageFor(model => model.Title, "", new { @class = "text-danger" })
                        </div>
                        <div class="form-group col-md-10">
                            @Html.LabelFor(model => model.Description, htmlAttributes: new { @class = "control-label " })
                            @Html.EditorFor(model => model.Description, new { htmlAttributes = new { @class = "form-control" } })
                            @Html.ValidationMessageFor(model => model.Description, "", new { @class = "text-danger" })
                        </div>
                        <div class="form-group col-md-10">
                            @Html.LabelFor(model => model.Amount, htmlAttributes: new { @class = "control-label " })
                            @Html.EditorFor(model => model.Amount, new { htmlAttributes = new { @class = "form-control", @Value = Model.Amount.ToString().Replace(",", ".") } })
                            @Html.ValidationMessageFor(model => model.Amount, "", new { @class = "text-danger" })*@
                        </div>
                        @*<div class="input-append date form_datetime">
                            @Html.EditorFor(model => model.AdsViewAdverts.DatePublished, new { @Value = Model.AdsViewAdverts.DatePublished.ToString("dd-MM-yyyy") })
                            <span class="add-on"><i class="icon-th"></i></span>
                        </div>*@

                        @*<script type="text/javascript">
                            $(".form_datetime").datetimepicker({
                                format: "dd-MM-yyyy"
                            });
                        </script>*@
                        <div class="form-group col-md-10">
                            @Html.LabelFor(model => model.SubmissionDate, htmlAttributes: new { @class = "control-label " })
                            @Html.EditorFor(model => model.SubmissionDate, new { @Value = Model.SubmissionDate.ToString("dd-MM-yyyy") })
                            @Html.ValidationMessageFor(model => model.SubmissionDate, null, new { @class = "text-danger" })
                        </div>
                        <div class="form-group col-md-10">
                            @Html.LabelFor(model => model.ModifyDate, htmlAttributes: new { @class = "control-label " })
                            @Html.EditorFor(model => model.ModifyDate, new { @Value = Model.ModifyDate.ToString("dd-MM-yyyy") })
                            @Html.ValidationMessageFor(model => model.ModifyDate, null, new { @class = "text-danger" })
                        </div>
                        <div class="form-group col-md-10">
                            <h3>Supporting information</h3>
                        </div>
                        @*if (Model.AdsViewFile != null)
                        {
                            var fileContentType = Model.AdsViewFile.ContentType != null ? Model.AdsViewFile.ContentType : null;
                            var fileId = Model.AdsViewFile.FileId != 0 ? Model.AdsViewFile.FileId : 0;
                            var fileName = Model.AdsViewFile.Filename != null ? Model.AdsViewFile.Filename : null;
                            var fileContent = Model.AdsViewFile.Content != null ? Model.AdsViewFile.Content : null;

                            <div class="form-group col-md-10">
                                @Html.Label("Attachment", htmlAttributes: new { @class = "control-label" })
                                @if (fileId > 0)
                                {
                                    if (fileContentType.Contains("image"))
                                    {
                                        <img src="~/File?id=@fileId" alt="ad" />
                                    }
                                    else
                                    {
                                        <a href="~/File?id=@fileId" alt="ad" target="_blank"><div class="docAttachment"></div></a>
                                    }

                                    <p>To amend an this attachment, please use the field below.</p>
                                }
                            </div>
                        }
                        else
                        {
                            <div class="form-group col-md-10">
                                There are no existing attachments.  Please use the field below to add an attachment if relevant.
                            </div>
                        }
                        <div class="form-group col-md-10">
                            @Html.Label("New attachment", htmlAttributes: new { @class = "control-label " })
                            <img id="imgPlan" src="~/images/tooltip.png" title="Only image files and Pdf documents are permitted." />
                            <input type="file" id="attachment" name="upload" accept="image/*" />
                        </div>*@
                        <div class="form-group col-md-10">
                            <div>
                                <button type="submit" class="btn btn-default">Submit <span class="glyphicon glyphicon-send"></span></button>
                            </div>
                        </div>
                    }

                    @section Scripts {
                        
                    }
                </div>
            </div>
        </div>
    </div>

